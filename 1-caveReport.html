<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <title>ë™êµ´ë¯¸ì…˜ ë¦¬í¬íŠ¸</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://raw.githack.com/eKoopmans/html2pdf/master/dist/html2pdf.bundle.js"></script>
  <style>
    body {
      padding: 10px;
      /* ìƒí•˜ì¢Œìš° ì—¬ë°± ì¤„ì´ê¸° */
      background: #fffaf2;
      font-family: 'Pretendard', 'Noto Sans KR', sans-serif;
      color: #333;
    }

    .report-container {
      max-width: 780px;
      padding: 24px 32px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
      margin: auto;
    }

    .report-header {
      text-align: center;
      margin-bottom: 30px;
    }

    .report-header h1 {
      font-size: 28px;
      color: #2c7c8c;
      margin-bottom: 16px;
    }

    .report-meta {
      display: flex;
      justify-content: center;
      gap: 32px;
      flex-wrap: wrap;
      font-size: 20px;
      color: #444;
    }

    .summary-box {
      background: #f0f9f9;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 30px;
    }

    .summary-box p {
      display: flex;
      align-items: baseline;
      gap: 8px;
    }

    .section-title {
      font-size: 20px;
      font-weight: bold;
      margin-top: 30px;
      color: #397d84;
      border-bottom: 2px solid #c4e4e4;
      padding-bottom: 5px;
    }

    .footer {
      text-align: center;
      margin-top: 40px;
      font-style: italic;
      color: #666;
    }

    .stars {
      color: #f7c94c;
      font-weight: bold;
      margin-top: 2px;
    }

    .pdf-button {
      display: block;
      margin: 30px auto 10px;
      background: #2c7c8c;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }

    .pdf-button.close {
      background: #ccc;
      color: #333;
    }

    .pdf-button.close:hover {
      background: #bbb;
    }

    .pdf-button:hover {
      background: #216972;
    }

    .chart-container {
      position: relative;
    }

    .chart-overlay {
      position: absolute;
      pointer-events: none;
    }

    .icon-label {
      position: absolute;
      font-size: 14px;
      text-align: center;
      transform: translate(-50%, -50%);
      pointer-events: none;
      white-space: nowrap;
    }

    .chest-topic-list {
      margin-top: 20px;
      padding-left: 20px;
      font-size: 15px;
      line-height: 1.6;
      color: #444;
    }

    .chest-topic-list li::before {
      content: 'ğŸ“¦ ';
    }

    .button-group {
      display: flex;
      justify-content: center;
      gap: 16px;
      margin-bottom: 20px;
    }
  </style>
</head>

<body>
  <div class="button-group">
    <button class="pdf-button" onclick="downloadPDF()">ğŸ“„ PDF ì €ì¥í•˜ê¸°</button>
    <button class="pdf-button close" onclick="closeReport()">ë‹«ê¸°</button>
  </div>

  <div id="report" class="report-container">
    <div class="report-header">
      <h1>ì œ1ì¥ ë™êµ´ë¯¸ì…˜ í•™ìŠµ ë³´ê³ ì„œ</h1>
      <div class="report-meta">
        <div><strong>ì´ë¦„:</strong> í‹°ì˜¤</div>
        <div><strong>ì´ ë³„ ê°œìˆ˜:</strong> <span class="stars">â­ x 49</span></div>
        <div><strong>ë‚ ì§œ:</strong> 2025-05-17</div>
      </div>
    </div>

    <div class="summary-box">
      <p>ğŸ“¦ <strong>ì´ ë¯¸ì…˜ ìˆ˜:</strong> 5ê°œ ë³´ë¬¼ìƒì</p>
      <p>ğŸ“ <strong>ì´ ë¬¸ì œ ìˆ˜:</strong> 30ë¬¸ì œ</p>
      <p>âœ… <strong>ì •ë‹µ ìˆ˜:</strong> 25ê°œ</p>
      <p>ğŸ“Š <strong>í‰ê·  ì •í™•ë„:</strong> 83.3%</p>
      <p>ğŸ’¬ <strong>í•œì¤„ í”¼ë“œë°±:</strong> ì§ê°ê³¼ ê°ë„ ê°œë…ì„ ì˜ ìµí˜”ì–´ìš”! ì •êµí•¨ì´ ì¡°ê¸ˆ ë” ì¢‹ì•„ì§ˆ ìˆ˜ ìˆì–´ìš”!</p>
    </div>

    <div class="section-title">ë³´ë¬¼ìƒìë³„ ì •í™•ë„ + ë³„ ê°œìˆ˜</div>
    <div class="chart-container">
      <canvas id="accuracyChart" width="700" height="300"></canvas>
      <div id="chartOverlay" class="chart-overlay"></div>
    </div>

    <div class="section-title">ë³´ë¬¼ìƒìë³„ í•™ìŠµ ì£¼ì œ</div>
    <ul class="chest-topic-list">
      <li><strong>1ë²ˆ ë³´ë¬¼ìƒì:</strong> ê° ê·¸ë¦¬ê¸°</li>
      <li><strong>2ë²ˆ ë³´ë¬¼ìƒì:</strong> ì§ê°ì‚¼ê°í˜•ì—ì„œ ì§ê° ì°¾ê¸°</li>
      <li><strong>3ë²ˆ ë³´ë¬¼ìƒì:</strong> ì§ê°ì‚¼ê°í˜• ê·¸ë¦¬ê¸°</li>
      <li><strong>4ë²ˆ ë³´ë¬¼ìƒì:</strong> ì§ê°ì‚¬ê°í˜•ì—ì„œ ì§ê° ì°¾ê¸°</li>
      <li><strong>5ë²ˆ ë³´ë¬¼ìƒì:</strong> ì§ê°ì‚¬ê°í˜• ê·¸ë¦¬ê¸°</li>
    </ul>

    <div class="footer">
      "ë„Œ ì´ì œ ìˆ²ì† ë§ˆì„ë¡œ ê°ˆ ì¤€ë¹„ê°€ ë˜ì—ˆë‹¤."
    </div>
  </div>

  <script>
    function closeReport() {

    }

    function downloadPDF() {
      const element = document.getElementById('report');
      const opt = {
        margin: 0.5,
        filename: 'ë™êµ´ë¯¸ì…˜_ë¦¬í¬íŠ¸.pdf',
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
      };
      html2pdf().set(opt).from(element).save();
    }

    const labels = ['1ë²ˆ ë³´ë¬¼ìƒì', '2ë²ˆ ë³´ë¬¼ìƒì', '3ë²ˆ ë³´ë¬¼ìƒì', '4ë²ˆ ë³´ë¬¼ìƒì', '5ë²ˆ ë³´ë¬¼ìƒì'];
    const accuracyData = [80, 100, 75, 85, 90];
    const starCounts = [9, 10, 7, 8, 9];

    const ctx = document.getElementById('accuracyChart').getContext('2d');
    const chartOverlay = document.getElementById('chartOverlay');

    const chart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: labels,
        datasets: [{
          label: 'ì •í™•ë„ (%)',
          data: accuracyData,
          backgroundColor: '#2c7c8c'
        }]
      },
      options: {
        responsive: false,
        animation: {
          onComplete: () => {
            chartOverlay.innerHTML = '';
            chart.data.datasets[0].data.forEach((value, index) => {
              const meta = chart.getDatasetMeta(0).data[index];
              const x = meta.x;
              const y = chart.scales.y.top - 5;

              const div = document.createElement('div');
              div.className = 'icon-label';
              div.style.left = `${x}px`;
              div.style.top = `${y}px`;
              div.textContent = `â­ x ${starCounts[index]}`;
              chartOverlay.appendChild(div);
            });
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            max: 100
          }
        },
        plugins: {
          legend: { display: false },
          tooltip: {
            callbacks: {
              label: (context) => {
                const topics = [
                  'ê° ê·¸ë¦¬ê¸°',
                  'ì§ê°ì‚¼ê°í˜•ì—ì„œ ì§ê° ì°¾ê¸°',
                  'ì§ê°ì‚¼ê°í˜• ê·¸ë¦¬ê¸°',
                  'ì§ê°ì‚¬ê°í˜•ì—ì„œ ì§ê° ì°¾ê¸°',
                  'ì§ê°ì‚¬ê°í˜• ê·¸ë¦¬ê¸°'
                ];
                return `${context.parsed.y}% - ${topics[context.dataIndex]}`;
              }
            }
          }
        }
      }
    });
  </script>

</body>

</html>